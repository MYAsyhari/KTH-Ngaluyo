<html>
    <head>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/3.3.3/adapter.min.js"></script>
        <script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://msxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    </head>
    <body>
       

        <Script>
		
            let scanner = new Instascan.Scanner({video: document.getElementById('preview')});
            Instascan.Camera.getCameras().then(function(cameras){
		    
		if(cameras.length>0){
		    scanner.start(cameras[0]);
		    $('[name="options"]').on('change',function(){
			if($(this).val()==1){
			    if(cameras[0]!=""){
				scanner.start(cameras[0]);
			    }else{
				alert('No Front camera found!');
			    }
			}else if($(this).val()==2){
			    if(cameras[1]!=""){
				scanner.start(cameras[1]);
			    }else{
				alert('No Back camera found!');
			    }
			}
		    });
		}else{
		    console.error('No cameras found.');
		    alert('No cameras found.');
		}
            }).catch(function(e){
                console.error(e);
            });

            scanner.addListener('scan',function(code){
            document.getElementById('text').value=code;	
			
			window.location.href = code;
			window.open(code, '_blank');

            });

        </script>
		
 	<div class="container">
            <div class="row">
                <div class="col-md-6">
                    <video id="preview" width="100%" height="100%"></video>
                </div>
                <div class="col-md-6">
		    			
			<div class="btn-group btn-group-toggle mb-5" data-toggle="buttons">
			  <label class="btn btn-primary active">
			    <input type="radio" name="options" value="1" autocomplete="off" checked> Front Camera
			  </label>
			  <label class="btn btn-secondary">
			    <input type="radio" name="options" value="2" autocomplete="off"> Back Camera
			  </label>
			</div>
			
			<label>SCAN</label>
                    	<input type="text" name="text" id="text" readonly="" placeholder="scan qrcode" class="form-control">
					
					<div id="tampil"></div>
                </div>
            </div>
        </div>
	    
	    
    </body>
</html>
